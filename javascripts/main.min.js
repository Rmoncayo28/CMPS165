<<<<<<< HEAD
function mouseover(e){div.style("display","inline")}function mousemove(e){div.html("<p style=text-align:center> County Name: "+e.properties.county_name+"<p style=text-align:left> Tract: <span style=float:right;>"+e.properties.NAME+"</span> </p><p style=text-align:left> Total Population: <span style=float:right;>"+e.properties.population+"</span> </p><p style=text-align:left> % of 18+ in College: <span style=float:right;>"+e.properties.inColCent+"</span> </p><p style=text-align:left> % Insured <span style=float:right;>"+e.properties.percent_insured+"</span> </p><p style=text-align:left> % Living in Poverty: <span style=float:right;>"+e.properties.percent_poverty+"</span> </p>").style("left",d3.event.pageX-220+"px").style("top",d3.event.pageY+"px")}function mouseout(e){div.style("display","none")}function changeData(e,t){"health"===t.toLowerCase()?(e.transition().style("fill",function(e){return void 0===selected[e.properties.NAME]?healthScale(parseFloat(e.properties.percent_insured,10)||0):"red"}),e.on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=document.getElementById("table1"),r=document.createElement("TR");r.setAttribute("id","row"+e.properties.NAME),r.setAttribute("class","rowContent");var n=document.createElement("TD");n.innerHTML=e.properties.NAME,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.county_name,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.population,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.inColCent,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.percent_insured,r.appendChild(n),t.appendChild(r)}else{d3.select(this).style("fill",function(e){return healthScale(parseFloat(e.properties.percent_insured,10)||0)}),selected[e.properties.NAME]=void 0;var a=document.getElementById("row"+e.properties.NAME);a.parentElement.removeChild(a)}})):"poverty"===t.toLowerCase()?(e.transition().style("fill",function(e){return void 0===selected[e.properties.NAME]?povertyScale(parseFloat(e.properties.inColCent,10)||0):"red"}),e.on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=(document.getElementById("table1"),document.createElement("TR"));t.setAttribute("id","row"+e.properties.NAME);var r=document.createElement("TD");r.innerHTML=e.properties.NAME,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.county_name,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.population,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.inColCent,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.percent_insured,t.appendChild(r)}else{d3.select(this).style("fill",function(e){return povertyScale(parseFloat(e.properties.inColCent,10)||0)}),selected[e.properties.NAME]=void 0;var n=document.getElementById("row"+e.properties.NAME);n.parentElement.removeChild(n)}})):"education"===t.toLowerCase()&&(e.transition().style("fill",function(e){return void 0===selected[e.properties.NAME]?educationScale(parseFloat(e.properties.inColCent,10)||0):"red"}),e.on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=(document.getElementById("table1"),document.createElement("TR"));t.setAttribute("id","row"+e.properties.NAME);var r=document.createElement("TD");r.innerHTML=e.properties.NAME,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.county_name,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.population,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.inColCent,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.percent_insured,t.appendChild(r)}else{d3.select(this).style("fill",function(e){return educationScale(parseFloat(e.properties.inColCent,10)||0)}),selected[e.properties.NAME]=void 0;var n=document.getElementById("row"+e.properties.NAME);n.parentElement.removeChild(n)}}))}function zoomed(){0==d3.event.translate[0]&&0==d3.event.translate[0]&&window.scrollBy(0,80);var e=d3.event,t=Math.min(0,Math.max(e.translate[0],width-width*e.scale)),r=Math.min(0,Math.max(e.translate[1],height-height*e.scale));zoom.translate([t,r]),g.attr("transform",["translate("+[t,r]+")","scale("+e.scale+")"].join(" "))}var width=1900,height=1e3,projection=d3.geo.mercator().scale(2*width).center([-120,36]).translate([280,height/2+50]),zoom=d3.behavior.zoom().scaleExtent([1,200]).on("zoom",zoomed),path=d3.geo.path().projection(projection),border=1,borderColor="black",svg=d3.select("#map").append("svg").attr("width",width).attr("height",height).attr("border",border).append("g");svg.call(zoom);var g=svg.append("g"),educationScale=d3.scale.threshold().domain([2.67,5.34,10.68,44.66,100]).range(colorbrewer.Blues[5]),healthScale=d3.scale.threshold().domain([20.69875,41.3975,82.795,91.398,100]).range(colorbrewer.Greens[5]),povertyScale=d3.scale.threshold().domain([4.15,8.3,16.6,33.2,66.4]).range(colorbrewer.Purples[5]),formatPercent=d3.format(".0%"),keyScale=d3.scale.linear().domain([0,1]).range([0,5]),keyAxis=d3.svg.axis().scale(keyScale).orient("bottom").tickSize(20).tickFormat(function(e){return Math.ceil(e)>=45?Math.ceil(e)+"%":Math.ceil(e)}),selected={},mapX=screen.width/3,mapY=-30,map21X=100,map21Y=-30,map22X=800,map22Y=-30,map31X=10,map31Y=-30,map32X=610,map32Y=-30,map33X=1220,map33Y=-30,dataType="education",deleteRow=function(e){var t=e.parentNode;t.removeChild(e)};d3.json("dataSets/caEduHealthPovertyBound.json",function(e,t){if(e)throw e;var r=(topojson.feature(t,t.objects.tracts),g.append("g").attr("transform","translate("+mapX+","+mapY+")"));r.selectAll(".tract1").data(topojson.feature(t,t.objects.tracts).features).enter().append("g").attr("class","tract1").append("path").attr("class","tract").style("fill",function(e){return educationScale(parseFloat(e.properties.inColCent,10)||0)}).attr("d",path).on("mouseover",function(e){mouseover(e)}).on("mouseout",function(e){mouseout(e)}).on("mousemove",function(e){mousemove(e)}).on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=document.getElementById("table1"),r=document.createElement("TR");r.setAttribute("id","row"+e.properties.NAME);var n=document.createElement("TD");n.innerHTML=e.properties.NAME,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.county_name,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.population,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.inColCent,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.percent_insured,r.appendChild(n),t.appendChild(r);var a=this,i=e;r.addEventListener("click",function(){deleteRow(r),d3.select(a).style("fill",function(e){return educationScale(parseFloat(e.properties.inColCent,10)||0)}),selected[i.properties.NAME]=void 0})}else{d3.select(this).style("fill",function(e){return educationScale(parseFloat(e.properties.inColCent,10)||0)}),selected[e.properties.NAME]=void 0;var o=document.getElementById("row"+e.properties.NAME);o.parentElement.removeChild(o)}});r.append("path").datum(topojson.mesh(t,t.objects.counties,function(e,t){return e!==t})).attr("class","county-border").attr("d",path);var n=80,a=850;keyAxis.tickValues(educationScale.domain());var i=r.append("g").attr("class","key").attr("transform","translate("+n+","+a+")");i.selectAll("legend1-rect").data(educationScale.range().map(function(e){var t=educationScale.invertExtent(e);return null==t[0]&&(t[0]=keyScale.domain()[0]),null==t[1]&&(t[1]=keyScale.domain()[1]),t})).enter().append("rect").attr("class","legend1-rect").attr("x",function(e){return keyScale(e[0])}).attr("width",function(e){return keyScale(e[1])-keyScale(e[0])}).attr("height",15).style("fill",function(e){return educationScale(e[0])});i.call(keyAxis).append("text").attr("class","legend1-caption").attr("x",5).attr("y",-10).attr("dy",".35em").text("percentage of population age 18 and over enrolled in college");var o=g.append("g").attr("visibility","hidden");o.selectAll(".tract2").data(topojson.feature(t,t.objects.tracts).features).enter().append("g").attr("class","tract2").append("path").attr("class","tract-2").style("fill",function(e){return healthScale(parseFloat(e.properties.percent_insured,10)||0)}).attr("d",path).on("mouseover",function(e){mouseover(e)}).on("mouseout",function(e){mouseout(e)}).on("mousemove",function(e){mousemove(e)}).on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=document.getElementById("table1"),r=document.createElement("TR");r.setAttribute("id","row"+e.properties.NAME);var n=document.createElement("TD");n.innerHTML=e.properties.NAME,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.county_name,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.population,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.inColCent,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.percent_insured,r.appendChild(n),t.appendChild(r);var a=this,i=e;r.addEventListener("click",function(){deleteRow(r),d3.select(a).style("fill",function(e){return healthScale(parseFloat(e.properties.percent_insured,10)||0)}),selected[i.properties.NAME]=void 0})}else{d3.select(this).style("fill",function(e){return healthScale(parseFloat(e.properties.percent_insured,10)||0)}),selected[e.properties.NAME]=void 0;var o=document.getElementById("row"+e.properties.NAME);o.parentElement.removeChild(o)}});o.append("path").datum(topojson.mesh(t,t.objects.counties,function(e,t){return e!==t})).attr("class","county-border").attr("d",path);var l=80,s=850;keyAxis.tickValues(healthScale.domain());var p=o.append("g").attr("class","key").attr("transform","translate("+l+","+s+")");p.selectAll("legend2-rect").data(healthScale.range().map(function(e){var t=healthScale.invertExtent(e);return null==t[0]&&(t[0]=keyScale.domain()[0]),null==t[1]&&(t[1]=keyScale.domain()[1]),t})).enter().append("rect").attr("class","legend2-rect").attr("x",function(e){return keyScale(e[0])}).attr("width",function(e){return keyScale(e[1])-keyScale(e[0])}).attr("height",15).style("fill",function(e){return healthScale(e[0])});p.call(keyAxis).append("text").attr("class","legend2-caption").attr("x",5).attr("y",-10).attr("dy",".35em").text("percentage of population acquired health insurance");var d=g.append("g").attr("visibility","hidden");d.selectAll(".tract3").data(topojson.feature(t,t.objects.tracts).features).enter().append("g").attr("class","tract3").append("path").attr("class","tract-3").style("fill",function(e){return povertyScale(parseFloat(e.properties.percent_poverty,10)||0)}).attr("d",path).on("mouseover",function(e){mouseover(e)}).on("mouseout",function(e){mouseout(e)}).on("mousemove",function(e){mousemove(e)}).on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=document.getElementById("table1"),r=document.createElement("TR");r.setAttribute("id","row"+e.properties.NAME);var n=document.createElement("TD");n.innerHTML=e.properties.NAME,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.county_name,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.population,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.inColCent,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.percent_insured,r.appendChild(n),t.appendChild(r);var a=this,i=e;r.addEventListener("click",function(){deleteRow(r),d3.select(a).style("fill",function(e){return povertyScale(parseFloat(e.properties.percent_poverty,10)||0)}),selected[i.properties.NAME]=void 0}),r.addEventListener("mouseover",function(){console.log("over")})}else{d3.select(this).style("fill",function(e){return povertyScale(parseFloat(e.properties.percent_poverty,10)||0)}),selected[e.properties.NAME]=void 0;var o=document.getElementById("row"+e.properties.NAME);o.parentElement.removeChild(o)}});d.append("path").datum(topojson.mesh(t,t.objects.counties,function(e,t){return e!==t})).attr("class","county-border").attr("d",path);var c=80,u=850;keyAxis.tickValues(povertyScale.domain());var m=d.append("g").attr("class","key").attr("transform","translate("+c+","+u+")");m.selectAll("legend3-rect").data(povertyScale.range().map(function(e){var t=povertyScale.invertExtent(e);return null==t[0]&&(t[0]=keyScale.domain()[0]),null==t[1]&&(t[1]=keyScale.domain()[1]),t})).enter().append("rect").attr("class","legend3-rect").attr("x",function(e){return keyScale(e[0])}).attr("width",function(e){return keyScale(e[1])-keyScale(e[0])}).attr("height",15).style("fill",function(e){return povertyScale(e[0])});m.call(keyAxis).append("text").attr("class","legend3-caption").attr("x",5).attr("y",-10).attr("dy",".35em").text("percentage of population below poverty level"),d3.selectAll(".overlay_button").on("change",function(){var e=this.id;switch(e){case"education_box":break;case"health_box":break;case"poverty_box":}}),d3.select("#wrapper").remove(),activeEduButton();var h="true",v="false",y="false";$("#selector button").click(function(){"button_education"==$(event.target).attr("id")?h=$(event.target).attr("value"):"button_health"==$(event.target).attr("id")?v=$(event.target).attr("value"):"button_poverty"==$(event.target).attr("id")&&(y=$(event.target).attr("value")),"true"==h&&"true"==v&&"true"==y?(r.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map31X+","+map31Y+")"),o.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map32X+","+map32Y+")"),d.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map33X+","+map33Y+")")):"true"==h&&"true"==v?(r.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map21X+","+map21Y+")"),o.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map22X+","+map22Y+")"),d.attr("visibility","hidden")):"true"==h&&"true"==y?(r.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map21X+","+map21Y+")"),d.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map22X+","+map22Y+")"),o.attr("visibility","hidden")):"true"==v&&"true"==y?(o.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map21X+","+map21Y+")"),d.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map22X+","+map22Y+")"),r.attr("visibility","hidden")):"true"==h?(r.transition().duration(750).attr("visibility","visible").attr("transform","translate("+mapX+","+mapY+")"),o.attr("visibility","hidden"),d.attr("visibility","hidden")):"true"==v?(r.attr("visibility","hidden"),o.transition().duration(750).attr("visibility","visible").attr("transform","translate("+mapX+","+mapY+")"),d.attr("visibility","hidden")):"true"==y&&(r.attr("visibility","hidden"),o.attr("visibility","hidden"),d.transition().duration(750).attr("visibility","visible").attr("transform","translate("+mapX+","+mapY+")"))})});var div=d3.select("body").append("div").attr("class","tooltip").style("display","none");d3.select(self.frameElement).style("height",height+"px");
=======
function mouseover(e){div.style("display","inline")}function mousemove(e){div.html("<p style=text-align:center> <strong> <font size=3>"+e.properties.county_name+"</strong> </font> <p style=text-align:left> Tract: <span style=float:right;>"+e.properties.NAME+"</span> </p><p style=text-align:left> Total Population: <span style=float:right;>"+e.properties.population+"</span> </p><p style=text-align:left> % of 18+ in College: <span style=float:right;>"+e.properties.inColCent+"</span> </p><p style=text-align:left> % Insured: <span style=float:right;>"+e.properties.percent_insured+"</span> </p><p style=text-align:left> % Living in Poverty: <span style=float:right;>"+e.properties.percent_poverty+"</span> </p>").style("left",d3.event.pageX-220+"px").style("top",d3.event.pageY+"px")}function mouseout(e){div.style("display","none")}function changeData(e,t){"health"===t.toLowerCase()?(e.transition().style("fill",function(e){return void 0===selected[e.properties.NAME]?healthScale(parseFloat(e.properties.percent_insured,10)||0):"red"}),e.on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=document.getElementById("table1"),r=document.createElement("TR");r.setAttribute("id","row"+e.properties.NAME),r.setAttribute("class","rowContent");var n=document.createElement("TD");n.innerHTML=e.properties.NAME,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.county_name,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.population,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.inColCent,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.percent_insured,r.appendChild(n),t.appendChild(r)}else{d3.select(this).style("fill",function(e){return healthScale(parseFloat(e.properties.percent_insured,10)||0)}),selected[e.properties.NAME]=void 0;var a=document.getElementById("row"+e.properties.NAME);a.parentElement.removeChild(a)}})):"poverty"===t.toLowerCase()?(e.transition().style("fill",function(e){return void 0===selected[e.properties.NAME]?povertyScale(parseFloat(e.properties.inColCent,10)||0):"red"}),e.on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=(document.getElementById("table1"),document.createElement("TR"));t.setAttribute("id","row"+e.properties.NAME);var r=document.createElement("TD");r.innerHTML=e.properties.NAME,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.county_name,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.population,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.inColCent,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.percent_insured,t.appendChild(r)}else{d3.select(this).style("fill",function(e){return povertyScale(parseFloat(e.properties.inColCent,10)||0)}),selected[e.properties.NAME]=void 0;var n=document.getElementById("row"+e.properties.NAME);n.parentElement.removeChild(n)}})):"education"===t.toLowerCase()&&(e.transition().style("fill",function(e){return void 0===selected[e.properties.NAME]?educationScale(parseFloat(e.properties.inColCent,10)||0):"red"}),e.on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=(document.getElementById("table1"),document.createElement("TR"));t.setAttribute("id","row"+e.properties.NAME);var r=document.createElement("TD");r.innerHTML=e.properties.NAME,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.county_name,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.population,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.inColCent,t.appendChild(r),r=document.createElement("TD"),r.innerHTML=e.properties.percent_insured,t.appendChild(r)}else{d3.select(this).style("fill",function(e){return educationScale(parseFloat(e.properties.inColCent,10)||0)}),selected[e.properties.NAME]=void 0;var n=document.getElementById("row"+e.properties.NAME);n.parentElement.removeChild(n)}}))}function zoomed(){0==d3.event.translate[0]&&0==d3.event.translate[0]&&window.scrollBy(0,80);var e=d3.event,t=Math.min(0,Math.max(e.translate[0],width-width*e.scale)),r=Math.min(0,Math.max(e.translate[1],height-height*e.scale));zoom.translate([t,r]),g.attr("transform",["translate("+[t,r]+")","scale("+e.scale+")"].join(" "))}var width=1900,height=1e3,projection=d3.geo.mercator().scale(2*width).center([-120,36]).translate([280,height/2+50]),zoom=d3.behavior.zoom().scaleExtent([1,200]).on("zoom",zoomed),path=d3.geo.path().projection(projection),border=1,borderColor="black",svg=d3.select("#map").append("svg").attr("width",width).attr("height",height).attr("border",border).append("g");svg.call(zoom);var g=svg.append("g"),educationScale=d3.scale.threshold().domain([2.67,5.34,10.68,44.66,100]).range(colorbrewer.Blues[5]),healthScale=d3.scale.threshold().domain([20.69875,41.3975,82.795,91.398,100]).range(colorbrewer.Greens[5]),povertyScale=d3.scale.threshold().domain([4.15,8.3,16.6,33.2,66.4]).range(colorbrewer.Purples[5]),formatPercent=d3.format(".0%"),keyScale=d3.scale.linear().domain([0,1]).range([0,5]),keyAxis=d3.svg.axis().scale(keyScale).orient("bottom").tickSize(20).tickFormat(function(e){return Math.ceil(e)>=45?Math.ceil(e)+"%":Math.ceil(e)}),selected={},mapX=screen.width/3,mapY=-30,map21X=100,map21Y=-30,map22X=800,map22Y=-30,map31X=10,map31Y=-30,map32X=610,map32Y=-30,map33X=1220,map33Y=-30,dataType="education";d3.json("dataSets/caEduHealthPovertyBound.json",function(e,t){if(e)throw e;var r=(topojson.feature(t,t.objects.tracts),g.append("g").attr("transform","translate("+mapX+","+mapY+")"));r.selectAll(".tract1").data(topojson.feature(t,t.objects.tracts).features).enter().append("g").attr("class","tract1").append("path").attr("class","tract").style("fill",function(e){return educationScale(parseFloat(e.properties.inColCent,10)||0)}).attr("d",path).on("mouseover",function(e){mouseover(e)}).on("mouseout",function(e){mouseout(e)}).on("mousemove",function(e){mousemove(e)}).on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=document.getElementById("table1"),r=document.createElement("TR");r.setAttribute("id","row"+e.properties.NAME);var n=document.createElement("TD");n.innerHTML=e.properties.NAME,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.county_name,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.population,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.inColCent,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.percent_insured,r.appendChild(n),t.appendChild(r)}else{d3.select(this).style("fill",function(e){return educationScale(parseFloat(e.properties.inColCent,10)||0)}),selected[e.properties.NAME]=void 0;var a=document.getElementById("row"+e.properties.NAME);a.parentElement.removeChild(a)}});r.append("path").datum(topojson.mesh(t,t.objects.counties,function(e,t){return e!==t})).attr("class","county-border").attr("d",path);var n=80,a=850;keyAxis.tickValues(educationScale.domain());var i=r.append("g").attr("class","key").attr("transform","translate("+n+","+a+")");i.selectAll("legend1-rect").data(educationScale.range().map(function(e){var t=educationScale.invertExtent(e);return null==t[0]&&(t[0]=keyScale.domain()[0]),null==t[1]&&(t[1]=keyScale.domain()[1]),t})).enter().append("rect").attr("class","legend1-rect").attr("x",function(e){return keyScale(e[0])}).attr("width",function(e){return keyScale(e[1])-keyScale(e[0])}).attr("height",15).style("fill",function(e){return educationScale(e[0])});i.call(keyAxis).append("text").attr("class","legend1-caption").attr("x",5).attr("y",-10).attr("dy",".35em").text("percentage of population age 18 and over enrolled in college");var o=g.append("g").attr("visibility","hidden");o.selectAll(".tract2").data(topojson.feature(t,t.objects.tracts).features).enter().append("g").attr("class","tract2").append("path").attr("class","tract-2").style("fill",function(e){return healthScale(parseFloat(e.properties.percent_insured,10)||0)}).attr("d",path).on("mouseover",function(e){mouseover(e)}).on("mouseout",function(e){mouseout(e)}).on("mousemove",function(e){mousemove(e)}).on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=document.getElementById("table1"),r=document.createElement("TR");r.setAttribute("id","row"+e.properties.NAME);var n=document.createElement("TD");n.innerHTML=e.properties.NAME,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.county_name,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.population,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.inColCent,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.percent_insured,r.appendChild(n),t.appendChild(r)}else{d3.select(this).style("fill",function(e){return healthScale(parseFloat(e.properties.percent_insured,10)||0)}),selected[e.properties.NAME]=void 0;var a=document.getElementById("row"+e.properties.NAME);a.parentElement.removeChild(a)}});o.append("path").datum(topojson.mesh(t,t.objects.counties,function(e,t){return e!==t})).attr("class","county-border").attr("d",path);var l=80,s=850;keyAxis.tickValues(healthScale.domain());var p=o.append("g").attr("class","key").attr("transform","translate("+l+","+s+")");p.selectAll("legend2-rect").data(healthScale.range().map(function(e){var t=healthScale.invertExtent(e);return null==t[0]&&(t[0]=keyScale.domain()[0]),null==t[1]&&(t[1]=keyScale.domain()[1]),t})).enter().append("rect").attr("class","legend2-rect").attr("x",function(e){return keyScale(e[0])}).attr("width",function(e){return keyScale(e[1])-keyScale(e[0])}).attr("height",15).style("fill",function(e){return healthScale(e[0])});p.call(keyAxis).append("text").attr("class","legend2-caption").attr("x",5).attr("y",-10).attr("dy",".35em").text("percentage of population acquired health insurance");var d=g.append("g").attr("visibility","hidden");d.selectAll(".tract3").data(topojson.feature(t,t.objects.tracts).features).enter().append("g").attr("class","tract3").append("path").attr("class","tract-3").style("fill",function(e){return povertyScale(parseFloat(e.properties.percent_poverty,10)||0)}).attr("d",path).on("mouseover",function(e){mouseover(e)}).on("mouseout",function(e){mouseout(e)}).on("mousemove",function(e){mousemove(e)}).on("click",function(e){if(void 0===selected[e.properties.NAME]){selected[e.properties.NAME]=this,d3.select(this).style("fill","red");var t=document.getElementById("table1"),r=document.createElement("TR");r.setAttribute("id","row"+e.properties.NAME);var n=document.createElement("TD");n.innerHTML=e.properties.NAME,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.county_name,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.population,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.inColCent,r.appendChild(n),n=document.createElement("TD"),n.innerHTML=e.properties.percent_insured,r.appendChild(n),t.appendChild(r)}else{d3.select(this).style("fill",function(e){return povertyScale(parseFloat(e.properties.percent_poverty,10)||0)}),selected[e.properties.NAME]=void 0;var a=document.getElementById("row"+e.properties.NAME);a.parentElement.removeChild(a)}});d.append("path").datum(topojson.mesh(t,t.objects.counties,function(e,t){return e!==t})).attr("class","county-border").attr("d",path);var c=80,u=850;keyAxis.tickValues(povertyScale.domain());var m=d.append("g").attr("class","key").attr("transform","translate("+c+","+u+")");m.selectAll("legend3-rect").data(povertyScale.range().map(function(e){var t=povertyScale.invertExtent(e);return null==t[0]&&(t[0]=keyScale.domain()[0]),null==t[1]&&(t[1]=keyScale.domain()[1]),t})).enter().append("rect").attr("class","legend3-rect").attr("x",function(e){return keyScale(e[0])}).attr("width",function(e){return keyScale(e[1])-keyScale(e[0])}).attr("height",15).style("fill",function(e){return povertyScale(e[0])});m.call(keyAxis).append("text").attr("class","legend3-caption").attr("x",5).attr("y",-10).attr("dy",".35em").text("percentage of population below poverty level"),d3.selectAll(".overlay_button").on("change",function(){var e=this.id;switch(e){case"education_box":break;case"health_box":break;case"poverty_box":}}),d3.select("#wrapper").remove(),activeEduButton();var h="true",v="false",y="false";$("#selector button").click(function(){"button_education"==$(event.target).attr("id")?h=$(event.target).attr("value"):"button_health"==$(event.target).attr("id")?v=$(event.target).attr("value"):"button_poverty"==$(event.target).attr("id")&&(y=$(event.target).attr("value")),"true"==h&&"true"==v&&"true"==y?(r.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map31X+","+map31Y+")"),o.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map32X+","+map32Y+")"),d.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map33X+","+map33Y+")")):"true"==h&&"true"==v?(r.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map21X+","+map21Y+")"),o.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map22X+","+map22Y+")"),d.attr("visibility","hidden")):"true"==h&&"true"==y?(r.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map21X+","+map21Y+")"),d.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map22X+","+map22Y+")"),o.attr("visibility","hidden")):"true"==v&&"true"==y?(o.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map21X+","+map21Y+")"),d.transition().duration(750).attr("visibility","visible").attr("transform","translate("+map22X+","+map22Y+")"),r.attr("visibility","hidden")):"true"==h?(r.transition().duration(750).attr("visibility","visible").attr("transform","translate("+mapX+","+mapY+")"),o.attr("visibility","hidden"),d.attr("visibility","hidden")):"true"==v?(r.attr("visibility","hidden"),o.transition().duration(750).attr("visibility","visible").attr("transform","translate("+mapX+","+mapY+")"),d.attr("visibility","hidden")):"true"==y&&(r.attr("visibility","hidden"),o.attr("visibility","hidden"),d.transition().duration(750).attr("visibility","visible").attr("transform","translate("+mapX+","+mapY+")"))})});var div=d3.select("body").append("div").attr("class","tooltip").style("display","none");d3.select(self.frameElement).style("height",height+"px");
>>>>>>> origin/gh-pages
